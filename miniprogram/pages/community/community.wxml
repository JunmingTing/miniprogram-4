<!--精彩时刻页面 - 个人图片展示-->
<view class="community-container">
  <!-- 固定发布按钮 -->
  <view class="fixed-publish-btn" bind:tap="onPublishTap">
    <t-icon name="add" size="40rpx" color="#fff" />
  </view>

  <!-- 帖子列表 -->
  <view class="posts-list">
    <view class="post-item" wx:for="{{posts}}" wx:key="id" bind:tap="onPostTap" data-post="{{item}}">
      <!-- 用户信息 -->
      <view class="post-header">
        <view class="author-avatar-container">
          <image 
            src="{{item.author.avatar}}" 
            class="author-avatar"
            mode="aspectFill"
            wx:if="{{item.author.avatar}}"
          />
          <view class="author-avatar-placeholder" wx:else>
            <t-icon name="user" size="40rpx" color="#ccc" />
          </view>
        </view>
        <view class="author-info">
          <text class="author-name">{{item.author.name}}</text>
          <text class="post-time">{{item.time}}</text>
        </view>
      </view>

      <!-- 图片轮播 -->
      <view class="post-images" wx:if="{{item.images.length > 0}}">
        <t-swiper 
          current="{{item.currentImageIndex}}"
          bind:change="onImageChange"
          data-post-id="{{item.id}}"
          class="post-swiper"
        >
          <t-swiper-item wx:for="{{item.images}}" wx:key="index" wx:for-item="image">
            <t-image 
              src="{{image}}" 
              class="post-image"
              mode="aspectFill"
              width="100%"
              height="400rpx"
            />
          </t-swiper-item>
        </t-swiper>
        
        <!-- 图片指示器 -->
        <view class="image-indicator" wx:if="{{item.images.length > 1}}">
          <text class="indicator-text">{{item.currentImageIndex + 1}}/{{item.images.length}}</text>
        </view>
      </view>

      <!-- 标签区域 -->
      <view class="post-tags" wx:if="{{item.tags.length > 0}}">
        <view class="tag-item" wx:for="{{item.tags}}" wx:key="id" bind:tap="onTagTap" data-tag="{{item}}" catchtap="true">
          <t-tag 
            theme="{{item.isLiked ? 'warning' : 'default'}}"
            size="small"
            class="post-tag"
          >
            {{item.text}} {{item.likeCount}}
          </t-tag>
        </view>
      </view>
    </view>
  </view>

  <!-- 加载更多 -->
  <view class="load-more" wx:if="{{loading}}">
    <t-loading size="40rpx" />
    <text class="load-text">加载中...</text>
  </view>

  <!-- 空状态 -->
  <t-empty wx:if="{{!loading && posts.length === 0}}" 
    icon="image" 
    description="暂无帖子内容" 
  />
</view>

<!-- 添加标签对话框 -->
<t-dialog
  visible="{{showTagDialog}}"
  title="添加标签"
  content="请输入标签内容（最多12字）"
  bind:confirm="onTagConfirm"
  bind:cancel="onTagCancel"
>
  <view class="tag-input-container">
    <input 
      class="tag-input" 
      placeholder="输入标签内容" 
      value="{{tagText}}"
      maxlength="12"
      bind:input="onTagTextChange"
      focus="{{showTagDialog}}"
    />
  </view>
</t-dialog>


<!-- Toast提示 -->
<t-toast id="t-toast" />
